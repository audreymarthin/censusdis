# Triggered when automate and coverage-report 
# finish the respective workflow run
# This is run to push the changes commited 
# in those previous workflow and update git.

name: generate-update

on:
  workflow_run:
    workflows: [coverage-report]
    types: [completed]

jobs:
  push-changes:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest
    steps:
      #----------------------------------------------
      #       set up python
      #----------------------------------------------
      - name: Set up python
        id: setup-python
        uses: actions/setup-python@v4
        with:
          python-version: 3.9
      #----------------------------------------------
      #       push changes to repo
      #----------------------------------------------
      - name: Update git
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git push -f




